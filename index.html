<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K&C CCL</title>
    <link rel="stylesheet" href="./style.css">
    <script src="./countUp.umd.js"></script>
</head>

<body>
    <header>
        <div class="title_section">
            <span class="label">K&C CCL</span>
            <h1>KIM&CHA COUPLE CREDIT LOAN</h1>
            <span>+<strong id="diff_date">0</strong> 일 지났습니다.</span>
        </div>
        <div class="account_total">
            <strong id="acc">5,000,000</strong>
            <span>원</span>
        </div>
    </header>
    <div class="hover-title">
        기본정보 및 이자조회
    </div>

    <ul class="infor">
        <li class="row">
            <span>계좌주명</span>
            <span>김*림</span>
        </li>
        <li class="row">
            <span>계약자명</span>
            <span>차*혁</span>
        </li>
        <li class="row">
            <span>시작일</span>
            <span>2024. 06. 13</span>
        </li>
        <li class="row">
            <span>금액(원금)</span>
            <span>5,000,000원</span>
        </li>
        <li class="row">
            <span>이자율</span>
            <span>10%
                <span>(기본 5% + 여자친구 우대 5%)</span>
            </span>
        </li>
    </ul>

    <ul class="interest_list" id="interList">
        <li class="row">
            <p>월별 예상이자 조회</p>
        </li>
    </ul>

    <script>
        class Account {
            constructor() {
                this.firstPrice = 5000000;
                this.interestLate = 0.1;
                this.date = "2024. 06. 13"

                this.render();
            }

            get diffDate() {
                const now = new Date();
                const target = new Date(this.date);

                return Math.floor((now - target) / 1000 / 60 / 60 / 24);
            }

            get oneDay() {
                return Math.floor(this.firstPrice * this.interestLate / 365);
            }

            listRender() {
                const year = 2024;
                for (let i = 6; i < 12; i++) {
                    let days = new Date(year, i, 0).getDate();
                    const div = document.createElement('div')
                    const mSpan = document.createElement('span')
                    const mSpan2 = document.createElement('span')

                    div.classList.add('row')
                    mSpan.innerHTML = `${year}. ${i + 1 > 9 ? i + 1 : `0${i + 1}`}`;
                    mSpan2.innerHTML = `<span>${(days * this.oneDay).toLocaleString()}</span><span>원</span>`;

                    div.append(mSpan, mSpan2);
                    interList.append(div);
                }

                const year2 = 2025;
                for (let i = 0; i < 12; i++) {
                    let days = new Date(year2, i, 0).getDate();
                    const div = document.createElement('div')
                    const mSpan = document.createElement('span')
                    const mSpan2 = document.createElement('span')

                    div.classList.add('row')
                    mSpan.innerHTML = `${year2}. ${i + 1 > 9 ? i + 1 : `0${i + 1}`}`;
                    mSpan2.innerHTML = `<span>${(days * this.oneDay).toLocaleString()}</span><span>원</span>`;

                    div.append(mSpan, mSpan2);
                    interList.append(div);
                }
            }

            render() {
                diff_date.innerHTML = this.diffDate;
                
                var numAnim = new countUp.CountUp(acc, (this.firstPrice + (this.oneDay * this.diffDate)), {duration: 1,});
                numAnim.start()
                this.listRender();
            }
        }

        new Account();
    </script>
</body>

</html>