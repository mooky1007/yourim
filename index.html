<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K&C CCL</title>
    <link rel="stylesheet" href="./style.css">
    <script src="./countUp.umd.js"></script>

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <style>
        [data-aos=fade-up] {
            transform: translate3d(0, 20px, 0);
        }
    </style>
</head>

<body>
    <header>
        <div class="title_section">
            <span class="label" data-aos="fade-up">K&C CCL</span>
            <h1 data-aos="fade-up" data-aos-delay="100">KIM&CHA COUPLE CREDIT LOAN</h1>
            <span data-aos="fade-up" data-aos-delay="300">+<strong id="diff_date">0</strong> 일 지났습니다.</span>
            <span data-aos="fade-up" data-aos-delay="350">현재 총 이자수익은 <strong id="diff_money">0</strong>원 입니다.</span>
        </div>
        <div class="account_total" data-aos="fade-up" data-aos-delay="150">
            <strong id="acc">5,000,000</strong>
            <span>원</span>
        </div>
    </header>
    <div data-aos="fade-up" data-aos-delay="250">
        <div class="hover-title" id="refresh">
            기본정보 및 이자조회
        </div>
    </div>

    <ul class="infor" data-aos="fade-up" data-aos-delay="300">
        <li class="row">
            <span>계좌주명</span>
            <span>김*림</span>
        </li>
        <li class="row">
            <span>계약자명</span>
            <span>차*혁</span>
        </li>
        <li class="row">
            <span>시작일</span>
            <span id="start_date">2024. 06. 13</span>
        </li>
        <li class="row">
            <span>금액(원금)</span>
            <span id="start_money">5,000,000원</span>
        </li>
        <li class="row">
            <span>이자율</span>
            <span id="late">10%
                <span>(기본 5% + 여자친구 우대 5%)</span>
            </span>
        </li>
    </ul>

    <ul class="interest_list" id="interList" data-aos="fade-up" data-aos-delay="500">
        <li class="row">
            <p>월별 예상이자 조회</p>
        </li>
    </ul>

    <script>
        class Account {
            constructor() {
                this.firstPrice = 5000000;
                this.interestLate = 0.1;
                this.date = "2024. 06. 13"

                this.render();

                refresh.addEventListener('click', () => window.location.reload())
            }

            get diffDate() {
                const now = new Date();
                const target = new Date(this.date);

                return Math.floor((now - target) / 1000 / 60 / 60 / 24);
            }

            get oneDay() {
                return Math.floor(this.firstPrice * this.interestLate / 365);
            }

            listRender() {
                interList.innerHTML = `<li class="row"><p>월별 예상이자 조회</p></li>`;

                const year = 2024;
                for (let i = 6; i < 12; i++) {
                    let days = new Date(year, i, 0).getDate();
                    const div = document.createElement('div')
                    const mSpan = document.createElement('span')
                    const mSpan2 = document.createElement('span')

                    div.classList.add('row')
                    mSpan.innerHTML = `${year}. ${i + 1 > 9 ? i + 1 : `0${i + 1}`}`;
                    mSpan2.innerHTML = `<span>${(days * this.oneDay).toLocaleString()}</span><span>원</span>`;

                    div.append(mSpan, mSpan2);
                    interList.append(div);
                }

                const year2 = 2025;
                for (let i = 0; i < 12; i++) {
                    let days = new Date(year2, i, 0).getDate();
                    const div = document.createElement('div')
                    const mSpan = document.createElement('span')
                    const mSpan2 = document.createElement('span')

                    div.classList.add('row')
                    mSpan.innerHTML = `${year2}. ${i + 1 > 9 ? i + 1 : `0${i + 1}`}`;
                    mSpan2.innerHTML = `<span>${(days * this.oneDay).toLocaleString()}</span><span>원</span>`;

                    div.append(mSpan, mSpan2);
                    interList.append(div);
                }

                const year3 = 2026;
                for (let i = 0; i < 12; i++) {
                    let days = new Date(year3, i, 0).getDate();
                    const div = document.createElement('div')
                    const mSpan = document.createElement('span')
                    const mSpan2 = document.createElement('span')

                    div.classList.add('row')
                    mSpan.innerHTML = `${year3}. ${i + 1 > 9 ? i + 1 : `0${i + 1}`}`;
                    mSpan2.innerHTML = `<span>${(days * this.oneDay).toLocaleString()}</span><span>원</span>`;

                    div.append(mSpan, mSpan2);
                    interList.append(div);
                }

                const div = document.createElement('div')
                const mSpan = document.createElement('span')
                const mSpan2 = document.createElement('span')

                div.classList.add('row')
                div.style.justifyContent = 'center';
                div.style.fontSize = '20px';
                div.innerHTML = `⋮`
                interList.append(div);
            }

            render() {
                this.listRender();
                start_date.innerHTML = this.date;
                late.innerHTML = `${this.interestLate * 100}% <span>(기본 5% + 여자친구 우대 5%)</span>`
                start_money.innerHTML = `${this.firstPrice.toLocaleString()}원`
                diff_money.innerHTML = (this.oneDay * this.diffDate).toLocaleString()

                const numAnim = new countUp.CountUp(acc, (this.firstPrice + (this.oneDay * this.diffDate)), { duration: 1, });
                const numAnim2 = new countUp.CountUp(diff_date, (this.diffDate), { duration: 1, });
                setTimeout(() => {
                    numAnim.start();
                    numAnim2.start();
                }, 500)
            }
        }

        new Account();
        AOS.init();
    </script>
</body>

</html>